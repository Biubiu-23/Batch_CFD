# 脚本运行需求

1. CFD++多核计算环境
2. CFD++gui
3. 可运行shell脚本和batch脚本(window系统主机可以安装bash环境运行shell脚本)

# 计算示例以及文件说明

假设我们有一份飞行器的网格文件(CFD++可算)，需要对该飞行器计算四个迎角的状态，一个一个设置然后计算非常耗时(如果是算好几十个状态的话)。如何批量计算呢？

以example文件夹为例，我们称其为一级文件夹。里面存放了四个子文件夹，每个子文件夹即我们需要计算的状态。example文件夹里有三个.bat文件，每个子文件夹下有cfd++必备的文件和run.sh

# 计算流程

1. 完整的设置单个计算状态，要求设置完毕后可以直接计算该状态，计算完成后可后处理（该状态不必先计算完毕）
2. 复制该状态下的所有文件到其它子文件夹下，参考copyfiles.sh
3. 批量修改每个子文件夹的计算状态，参考modinp.sh
4. 批量修改后处理设置，参考modinfout.sh
5. 启动控制台，cd到一级文件夹内，输入mk_mcfdgui.bat并运行。此时回跳出所有四个计算状态的mcfdgui界面
6. 对于每一个界面，需要点击：5.1 Wizards-External Aero Aerospace Wizard-检查迎角是否自己想要设置的-Accept and Exit。如果不进行该流程。则系统无法根据设置的迎角初始化来流等。5.2湍流设置，如果不需要设置湍流，即可忽略。5.3 Save Input file
7. 开始运行。管理员方式打开cmd，cd到一级文件夹下，输入start_compute.bat并运行。此时会自动并行并多核计算每一个设置的状态
8. 计算完成后开始后处理，获取我们想要的升阻力系数数据。打开cmd, cd到一级文件夹下，输入post-process.bat，自动生成每一个计算状态下每一个时间步计算得到的相关数据，直到完成所有的生成。
9. 将相关数据输出到.csv文件。参考readClCd.sh

<br/>

# 注意事项

1. 库内相关代码高度定制化，一定要读懂后运行
2. 如果下载后出现.sh文件整份代码都报错的情况，可能是文件内换行符被git处理替换导致的，可以新建一个.sh文件，将原代码复制进去
3. run.bat程序内可以通过修改数字来改变每个状态计算时的并行核数的大小
4. shell_scripts目录存放.sh文件，batch_scripts存放.bat文件
5. 代码仅作参考，欢迎commit!


   
   